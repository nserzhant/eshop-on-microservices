<mat-card>
  <mat-card-header>
    <mat-card-title>{{ catalogItem == null? 'catalog.create-item' : 'catalog.edit-item' | translate }}</mat-card-title>
  </mat-card-header>
  <mat-card-content>
    <form [formGroup]="editItemForm" (ngSubmit)="onSubmit()">
      <mat-form-field appearance="outline"class="card-row">
        <mat-label>{{ 'catalog.name' | translate }}</mat-label>
        <input matInput formControlName="name">
        <mat-error *ngIf="editItemForm.controls['name']?.hasError('required')">
          {{ 'catalog.errors.name-required' | translate }}
        </mat-error>
      </mat-form-field>
      <mat-form-field appearance="outline" class="card-row">
        <mat-label>{{ 'catalog.brand' | translate }}</mat-label>
        <mat-select formControlName="brandId">
          <mat-option *ngFor="let brand of catalogBrands" [value]="brand.id">
            {{ brand.brand }}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="editItemForm.controls['brand']?.hasError('required')">
          {{ 'catalog.errors.brand-required' | translate }}
        </mat-error>
      </mat-form-field>
      <mat-form-field appearance="outline" class="card-row">
        <mat-label>{{ 'catalog.type' | translate }}</mat-label>
        <mat-select formControlName="typeId">
          <mat-option *ngFor="let type of catalogTypes" [value]="type.id">
            {{ type.type }}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="editItemForm.controls['type']?.hasError('required')">
          {{ 'catalog.errors.type-required' | translate }}
        </mat-error>
      </mat-form-field>
      <mat-form-field appearance="outline" class="card-row">
        <mat-label>{{ 'catalog.price' | translate }}</mat-label>
        <input type="nummber" matInput formControlName="price">
        <mat-error *ngIf="editItemForm.controls['price']?.hasError('pattern')">
          {{ 'catalog.errors.price-format' | translate }}
        </mat-error>
      </mat-form-field>
      <mat-form-field appearance="outline"class="card-row">
        <mat-label>{{ 'catalog.description' | translate }}</mat-label>
        <textarea matInput cdkTextareaAutosize
          cdkAutosizeMinRows="1"
          cdkAutosizeMaxRows="5"
          formControlName="description">
        </textarea>
      </mat-form-field>
      <mat-form-field appearance="outline" class="card-row">
        <mat-label>{{ 'catalog.picture-uri' | translate }}</mat-label>
        <input matInput formControlName="pictureUri" type="url">
      </mat-form-field>
      <mat-form-field appearance="outline" class="card-row">
        <mat-label>{{ 'catalog.available-qty' | translate }}</mat-label>
        <input type="nummber" matInput formControlName="availableQty">
        <mat-error *ngIf="editItemForm.controls['availableQty']?.hasError('pattern')">
          {{ 'catalog.errors.qty-should-be-number' | translate }}
        </mat-error>
      </mat-form-field>
      <catalog-api-errors-summary [error]="apiError"></catalog-api-errors-summary>
      <button type="submit" mat-raised-button color="primary" [disabled]="editItemForm.invalid || isCatalogItemSaving">
        {{ 'save' | translate }}
      </button>
      <button type="button" mat-raised-button color="primary" class="right" (click)="back()">
        {{ 'cancel' | translate }}
      </button>
      <mat-spinner *ngIf="isCatalogItemSaving" class="action-spinner"></mat-spinner>
    </form>
  </mat-card-content>
</mat-card>
